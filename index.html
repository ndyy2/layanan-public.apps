<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Layanan Masyarakat & UMKM Lokal</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-blue: #1e40af;
        --accent-teal: #14b8a6;
        --secondary-yellow: #fcd34d;
        --success-green: #10b981;
        --warning-yellow: #f59e0b;
        --white: #ffffff;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
      }

      body {
        font-family: "Inter", sans-serif;
        overflow-x: hidden;
        background: var(--gray-50);
        color: var(--gray-800);
      }

      /* Animated gradient background */
      .bg-animated {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          var(--primary-blue) 0%,
          #1e3a8a 50%,
          var(--accent-teal) 100%
        );
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        z-index: -2;
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Overlay pattern */
      .bg-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(255, 255, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(255, 255, 255, 0.08) 0%,
            transparent 50%
          );
        z-index: -1;
      }

      /* Floating particles */
      .particle {
        position: absolute;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        animation: float 20s infinite ease-in-out;
      }

      .particle:nth-child(1) {
        width: 80px;
        height: 80px;
        top: 10%;
        left: 10%;
        animation-delay: 0s;
      }
      .particle:nth-child(2) {
        width: 60px;
        height: 60px;
        top: 70%;
        left: 80%;
        animation-delay: 2s;
      }
      .particle:nth-child(3) {
        width: 100px;
        height: 100px;
        top: 50%;
        left: 70%;
        animation-delay: 4s;
      }
      .particle:nth-child(4) {
        width: 50px;
        height: 50px;
        top: 80%;
        left: 20%;
        animation-delay: 6s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
          opacity: 0.3;
        }
        50% {
          transform: translateY(-100px) rotate(180deg);
          opacity: 0.6;
        }
      }

      /* Navbar */
      nav {
        position: fixed;
        top: 0;
        width: 100%;
        padding: 20px 50px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        animation: slideDown 0.8s ease;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      }

      @keyframes slideDown {
        from {
          transform: translateY(-100px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--primary-blue);
        letter-spacing: 1px;
      }

      .nav-buttons {
        display: flex;
        gap: 15px;
      }

      .btn-nav {
        padding: 10px 25px;
        border-radius: 25px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.95rem;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 2px solid transparent;
        cursor: pointer;
        background: none;
      }

      .btn-masuk {
        color: var(--gray-700);
        border-color: var(--gray-300);
      }

      .btn-masuk:hover {
        background: var(--gray-100);
        color: var(--primary-blue);
        border-color: var(--primary-blue);
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(30, 64, 175, 0.1);
      }

      .btn-daftar {
        background: var(--primary-blue);
        color: white;
        border: none;
      }

      .btn-daftar:hover {
        background: var(--accent-teal);
        color: white;
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 10px 30px rgba(20, 184, 166, 0.4);
      }

      /* Hero Section */
      .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 0 20px;
        position: relative;
        background: linear-gradient(
          135deg,
          var(--gray-50) 0%,
          var(--gray-100) 100%
        );
      }

      .hero-content {
        max-width: 900px;
        animation: fadeInUp 1s ease 0.3s both;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h1 {
        font-size: 4.5rem;
        font-weight: 900;
        color: var(--gray-900);
        margin-bottom: 25px;
        line-height: 1.2;
        text-shadow: 0 5px 30px rgba(0, 0, 0, 0.05);
        letter-spacing: -1px;
      }

      .highlight {
        background: linear-gradient(
          120deg,
          var(--primary-blue) 0%,
          var(--accent-teal) 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      h2 {
        font-size: 1.4rem;
        font-weight: 400;
        color: var(--gray-600);
        margin-bottom: 50px;
        line-height: 1.8;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
      }

      /* CTA Buttons */
      .cta-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        animation: fadeInUp 1s ease 0.6s both;
      }

      .cta-btn {
        padding: 18px 45px;
        font-size: 1.1rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 700;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        display: inline-block;
        cursor: pointer;
        border: none;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary-blue) 0%,
          var(--accent-teal) 100%
        );
        color: white;
        box-shadow: 0 10px 40px rgba(30, 64, 175, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 60px rgba(30, 64, 175, 0.5);
      }

      .btn-primary::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }

      .btn-primary:hover::before {
        width: 300px;
        height: 300px;
      }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.9);
        color: var(--primary-blue);
        border: 2px solid var(--primary-blue);
        backdrop-filter: blur(10px);
      }

      .btn-secondary:hover {
        background: var(--primary-blue);
        color: white;
        border-color: var(--primary-blue);
        transform: translateY(-5px);
        box-shadow: 0 20px 60px rgba(30, 64, 175, 0.3);
      }

      /* Features Section */
      .features {
        padding: 100px 50px;
        animation: fadeInUp 1s ease 0.9s both;
        background: linear-gradient(
          135deg,
          var(--gray-50) 0%,
          var(--gray-100) 100%
        );
      }

      .section-title {
        text-align: center;
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--gray-900);
        margin-bottom: 60px;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .feature-card {
        background: var(--white);
        backdrop-filter: blur(10px);
        border: 1px solid var(--gray-200);
        border-radius: 20px;
        padding: 35px;
        text-align: center;
        transition: all 0.4s ease;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      }

      .feature-card:hover {
        transform: translateY(-10px);
        background: var(--white);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
        border-color: var(--primary-blue);
      }

      .feature-icon {
        font-size: 3rem;
        margin-bottom: 20px;
      }

      .feature-card h3 {
        color: var(--gray-900);
        font-size: 1.4rem;
        margin-bottom: 15px;
        font-weight: 700;
      }

      .feature-card p {
        color: var(--gray-600);
        line-height: 1.6;
      }

      /* Testimonials Section */
      .testimonials {
        padding: 100px 50px;
        background: linear-gradient(
          135deg,
          var(--primary-blue) 0%,
          #1e3a8a 100%
        );
        color: white;
      }

      .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .testimonial-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        transition: all 0.4s ease;
      }

      .testimonial-card:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.15);
      }

      .testimonial-text {
        font-style: italic;
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .testimonial-author {
        display: flex;
        align-items: center;
      }

      .author-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--accent-teal);
        margin-right: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: white;
      }

      .author-info h4 {
        font-weight: 600;
        margin-bottom: 5px;
      }

      .author-info p {
        font-size: 0.9rem;
        opacity: 0.8;
      }

      /* Footer */
      footer {
        background: var(--gray-900);
        color: var(--gray-300);
        padding: 60px 50px 30px;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 40px;
        margin-bottom: 40px;
      }

      .footer-column h3 {
        color: white;
        margin-bottom: 20px;
        font-size: 1.2rem;
      }

      .footer-column ul {
        list-style: none;
      }

      .footer-column ul li {
        margin-bottom: 10px;
      }

      .footer-column ul li a {
        color: var(--gray-400);
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-column ul li a:hover {
        color: var(--accent-teal);
      }

      .footer-bottom {
        max-width: 1200px;
        margin: 0 auto;
        padding-top: 30px;
        border-top: 1px solid var(--gray-700);
        text-align: center;
        font-size: 0.9rem;
        color: var(--gray-500);
      }

      /* Modal Styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background: white;
        border-radius: 24px;
        padding: 40px;
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        transform: scale(0.9) translateY(20px);
        transition: all 0.3s ease;
      }

      .modal-overlay.active .modal {
        transform: scale(1) translateY(0);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
      }

      .modal-header h2 {
        font-size: 2rem;
        font-weight: 800;
        color: var(--gray-900);
        margin: 0;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 2rem;
        color: var(--gray-400);
        cursor: pointer;
        transition: all 0.3s ease;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }

      .close-btn:hover {
        background: var(--gray-100);
        color: var(--gray-900);
        transform: rotate(90deg);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        font-weight: 600;
        color: var(--gray-700);
        margin-bottom: 8px;
        font-size: 0.95rem;
      }

      .form-group input {
        width: 100%;
        padding: 14px 18px;
        border: 2px solid var(--gray-200);
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
        font-family: "Inter", sans-serif;
      }

      .form-group input:focus {
        outline: none;
        border-color: var(--primary-blue);
        box-shadow: 0 0 0 4px rgba(30, 64, 175, 0.1);
      }

      .form-group input::placeholder {
        color: var(--gray-400);
      }

      .alert {
        padding: 14px 18px;
        border-radius: 12px;
        margin-bottom: 20px;
        font-weight: 600;
        display: none;
        animation: slideDown 0.3s ease;
      }

      .alert.show {
        display: block;
      }

      .alert-error {
        background: #fee;
        color: #c33;
        border: 2px solid #fcc;
      }

      .alert-success {
        background: #efe;
        color: #3c3;
        border: 2px solid #cfc;
      }

      .submit-btn {
        width: 100%;
        padding: 16px;
        background: linear-gradient(
          135deg,
          var(--primary-blue),
          var(--accent-teal)
        );
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
      }

      .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(30, 64, 175, 0.3);
      }

      .submit-btn:active {
        transform: translateY(0);
      }

      .form-footer {
        text-align: center;
        margin-top: 20px;
        color: var(--gray-600);
      }

      .form-footer a {
        color: var(--primary-blue);
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .form-footer a:hover {
        color: var(--accent-teal);
      }

      /* Responsive */
      @media (max-width: 768px) {
        h1 {
          font-size: 2.8rem;
        }
        h2 {
          font-size: 1.1rem;
        }
        .section-title {
          font-size: 2rem;
        }
        nav {
          padding: 15px 20px;
        }
        .logo {
          font-size: 1.2rem;
        }
        .cta-buttons {
          flex-direction: column;
          align-items: center;
        }
        .cta-btn {
          width: 80%;
          max-width: 300px;
        }
        .features,
        .testimonials {
          padding: 60px 20px;
        }
        footer {
          padding: 40px 20px 20px;
        }
        .modal {
          padding: 30px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Animated Background -->
    <div class="bg-animated"></div>
    <div class="bg-overlay"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>

    <!-- Navbar -->
    <nav>
      <div class="logo">UMKM Lokal</div>
      <div class="nav-buttons">
        <button class="btn-nav btn-masuk" onclick="openLoginModal()">
          Masuk
        </button>
        <button class="btn-nav btn-daftar" onclick="openRegisterModal()">
          Daftar
        </button>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>
          Layanan <span class="highlight">Masyarakat</span><br />
          & UMKM Lokal
        </h1>
        <h2>
          Mendukung pertumbuhan ekonomi lokal dengan layanan cepat, mudah, dan
          terpercaya. Bergabunglah dengan ribuan UMKM yang telah berkembang
          bersama kami.
        </h2>
        <div class="cta-buttons">
          <button class="cta-btn btn-primary" onclick="openRegisterModal()">
            <span style="position: relative; z-index: 1">Mulai Sekarang</span>
          </button>
          <button class="cta-btn btn-secondary" onclick="scrollToFeatures()">
            Jelajahi Layanan
          </button>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
      <h2 class="section-title">Fitur Unggulan Kami</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">üöÄ</div>
          <h3>Cepat & Efisien</h3>
          <p>Proses registrasi dan verifikasi hanya dalam hitungan menit</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üíº</div>
          <h3>Dukungan Penuh</h3>
          <p>Tim kami siap membantu mengembangkan bisnis Anda 24/7</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üîí</div>
          <h3>Aman Terpercaya</h3>
          <p>Data dan transaksi Anda dilindungi dengan teknologi terkini</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üìà</div>
          <h3>Analisis Bisnis</h3>
          <p>Dapatkan insight mendalam untuk pengembangan bisnis Anda</p>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials">
      <h2 class="section-title" style="color: white">Apa Kata Mereka?</h2>
      <div class="testimonials-grid">
        <div class="testimonial-card">
          <p class="testimonial-text">
            "Platform ini sangat membantu UMKM seperti saya. Prosesnya cepat dan
            mudah dipahami."
          </p>
          <div class="testimonial-author">
            <div class="author-avatar">AS</div>
            <div class="author-info">
              <h4>Ahmad Santoso</h4>
              <p>Pemilik Toko Kerajinan</p>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">
            "Dengan bantuan platform ini, omzet bisnis saya meningkat 40% dalam
            3 bulan terakhir."
          </p>
          <div class="testimonial-author">
            <div class="author-avatar">SD</div>
            <div class="author-info">
              <h4>Sari Dewi</h4>
              <p>Pemilik Katering</p>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">
            "Tim support sangat responsif dan membantu menyelesaikan masalah
            dengan cepat."
          </p>
          <div class="testimonial-author">
            <div class="author-avatar">BW</div>
            <div class="author-info">
              <h4>Budi Wibowo</h4>
              <p>Pemilik Bengkel</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <div class="footer-column">
          <h3>UMKM Lokal</h3>
          <p>
            Platform terpercaya untuk mendukung pertumbuhan UMKM di Indonesia.
          </p>
        </div>
        <div class="footer-column">
          <h3>Layanan</h3>
          <ul>
            <li><a href="#">Pendaftaran UMKM</a></li>
            <li><a href="#">Pelatihan Bisnis</a></li>
            <li><a href="#">Pemasaran Digital</a></li>
            <li><a href="#">Bantuan Hukum</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Perusahaan</h3>
          <ul>
            <li><a href="#">Tentang Kami</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Karir</a></li>
            <li><a href="#">Kontak</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3>Bantuan</h3>
          <ul>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Kebijakan Privasi</a></li>
            <li><a href="#">Syarat & Ketentuan</a></li>
            <li><a href="#">Bantuan Teknis</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 UMKM Lokal. Semua hak dilindungi.</p>
      </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
      <div class="modal">
        <div class="modal-header">
          <h2>Masuk</h2>
          <button class="close-btn" onclick="closeLoginModal()">&times;</button>
        </div>
        <div class="alert alert-error" id="loginAlert"></div>
        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label for="loginEmail">Email</label>
            <input
              type="email"
              id="loginEmail"
              placeholder="nama@email.com"
              required
            />
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input
              type="password"
              id="loginPassword"
              placeholder="Masukkan password"
              required
            />
          </div>
          <button type="submit" class="submit-btn">Masuk</button>
        </form>
        <div class="form-footer">
          Belum punya akun? <a onclick="switchToRegister()">Daftar sekarang</a>
        </div>
      </div>
    </div>

    <!-- Register Modal -->
    <div class="modal-overlay" id="registerModal">
      <div class="modal">
        <div class="modal-header">
          <h2>Daftar</h2>
          <button class="close-btn" onclick="closeRegisterModal()">
            &times;
          </button>
        </div>
        <div class="alert alert-error" id="registerAlert"></div>
        <div class="alert alert-success" id="registerSuccess"></div>
        <form onsubmit="handleRegister(event)">
          <div class="form-group">
            <label for="registerName">Nama Lengkap</label>
            <input
              type="text"
              id="registerName"
              placeholder="Masukkan nama lengkap"
              required
            />
          </div>
          <div class="form-group">
            <label for="registerEmail">Email</label>
            <input
              type="email"
              id="registerEmail"
              placeholder="nama@email.com"
              required
            />
          </div>
          <div class="form-group">
            <label for="registerPhone">Nomor Telepon</label>
            <input
              type="tel"
              id="registerPhone"
              placeholder="+62 xxx-xxxx-xxxx"
              required
            />
          </div>
          <div class="form-group">
            <label for="registerPassword">Password</label>
            <input
              type="password"
              id="registerPassword"
              placeholder="Minimal 6 karakter"
              required
              minlength="6"
            />
          </div>
          <div class="form-group">
            <label for="registerConfirmPassword">Konfirmasi Password</label>
            <input
              type="password"
              id="registerConfirmPassword"
              placeholder="Ulangi password"
              required
              minlength="6"
            />
          </div>
          <button type="submit" class="submit-btn">Daftar</button>
        </form>
        <div class="form-footer">
          Sudah punya akun? <a onclick="switchToLogin()">Masuk di sini</a>
        </div>
      </div>
    </div>

    <script>
      // ========================
      // USER DATABASE MANAGER
      // ========================
      const UserDB = {
        // Initialize database
        init() {
          if (!localStorage.getItem("usersDB")) {
            localStorage.setItem("usersDB", JSON.stringify([]));
          }
        },

        // Get all users
        getAllUsers() {
          return JSON.parse(localStorage.getItem("usersDB") || "[]");
        },

        // Find user by email
        findUserByEmail(email) {
          const users = this.getAllUsers();
          return users.find(
            (user) => user.email.toLowerCase() === email.toLowerCase()
          );
        },

        // Check if email exists
        emailExists(email) {
          return this.findUserByEmail(email) !== undefined;
        },

        // Add new user
        addUser(userData) {
          const users = this.getAllUsers();
          const newUser = {
            id: Date.now().toString(),
            name: userData.name,
            email: userData.email.toLowerCase(),
            phone: userData.phone,
            password: userData.password, // In production, this should be hashed
            registeredAt: new Date().toISOString(),
            profile: {
              position: "Pengguna",
              address: "",
              about: "",
              photo: null,
            },
          };
          users.push(newUser);
          localStorage.setItem("usersDB", JSON.stringify(users));
          return newUser;
        },

        // Validate login
        validateLogin(email, password) {
          const user = this.findUserByEmail(email);
          if (!user)
            return {
              success: false,
              message: "Email tidak terdaftar. Silakan daftar terlebih dahulu.",
            };
          if (user.password !== password)
            return {
              success: false,
              message: "Password salah. Silakan coba lagi.",
            };
          return { success: true, user: user };
        },

        // Update user data
        updateUser(userId, updates) {
          const users = this.getAllUsers();
          const userIndex = users.findIndex((u) => u.id === userId);
          if (userIndex !== -1) {
            users[userIndex] = { ...users[userIndex], ...updates };
            localStorage.setItem("usersDB", JSON.stringify(users));
            return users[userIndex];
          }
          return null;
        },
      };

      // ========================
      // SESSION MANAGER
      // ========================
      const SessionManager = {
        // Set current session
        setSession(user) {
          localStorage.setItem(
            "currentSession",
            JSON.stringify({
              userId: user.id,
              email: user.email,
              name: user.name,
              loginTime: new Date().toISOString(),
            })
          );
        },

        // Get current session
        getSession() {
          const session = localStorage.getItem("currentSession");
          return session ? JSON.parse(session) : null;
        },

        // Clear session (logout)
        clearSession() {
          localStorage.removeItem("currentSession");
        },

        // Check if logged in
        isLoggedIn() {
          return this.getSession() !== null;
        },
      };

      // ========================
      // INITIALIZATION
      // ========================
      document.addEventListener("DOMContentLoaded", function () {
        UserDB.init();

        // Check if already logged in
        if (SessionManager.isLoggedIn()) {
          window.location.href = "dashboard.html";
        }
      });

      // ========================
      // MODAL FUNCTIONS
      // ========================
      function openLoginModal() {
        document.getElementById("loginModal").classList.add("active");
        document.getElementById("loginAlert").classList.remove("show");
        document.getElementById("loginEmail").value = "";
        document.getElementById("loginPassword").value = "";
      }

      function closeLoginModal() {
        document.getElementById("loginModal").classList.remove("active");
      }

      function openRegisterModal() {
        document.getElementById("registerModal").classList.add("active");
        document.getElementById("registerAlert").classList.remove("show");
        document.getElementById("registerSuccess").classList.remove("show");
        // Clear form
        document.getElementById("registerName").value = "";
        document.getElementById("registerEmail").value = "";
        document.getElementById("registerPhone").value = "";
        document.getElementById("registerPassword").value = "";
        document.getElementById("registerConfirmPassword").value = "";
      }

      function closeRegisterModal() {
        document.getElementById("registerModal").classList.remove("active");
      }

      function switchToRegister() {
        closeLoginModal();
        setTimeout(() => openRegisterModal(), 300);
      }

      function switchToLogin() {
        closeRegisterModal();
        setTimeout(() => openLoginModal(), 300);
      }

      // Close modals when clicking outside
      document
        .getElementById("loginModal")
        .addEventListener("click", function (e) {
          if (e.target === this) closeLoginModal();
        });

      document
        .getElementById("registerModal")
        .addEventListener("click", function (e) {
          if (e.target === this) closeRegisterModal();
        });

      // ========================
      // AUTHENTICATION FUNCTIONS
      // ========================
      function handleLogin(event) {
        event.preventDefault();

        const email = document.getElementById("loginEmail").value.trim();
        const password = document.getElementById("loginPassword").value;
        const alertDiv = document.getElementById("loginAlert");

        // Validate login
        const result = UserDB.validateLogin(email, password);

        if (result.success) {
          // Set session
          SessionManager.setSession(result.user);

          // Show success message
          alertDiv.className = "alert alert-success show";
          alertDiv.textContent = "Login berhasil! Mengalihkan ke dashboard...";

          // Redirect to dashboard
          setTimeout(() => {
            window.location.href = "dashboard.html";
          }, 1000);
        } else {
          // Show error message
          alertDiv.className = "alert alert-error show";
          alertDiv.textContent = result.message;
        }
      }

      function handleRegister(event) {
        event.preventDefault();

        const name = document.getElementById("registerName").value.trim();
        const email = document.getElementById("registerEmail").value.trim();
        const phone = document.getElementById("registerPhone").value.trim();
        const password = document.getElementById("registerPassword").value;
        const confirmPassword = document.getElementById(
          "registerConfirmPassword"
        ).value;

        const alertDiv = document.getElementById("registerAlert");
        const successDiv = document.getElementById("registerSuccess");

        // Hide previous alerts
        alertDiv.classList.remove("show");
        successDiv.classList.remove("show");

        // Validation
        if (password !== confirmPassword) {
          alertDiv.textContent =
            "Password dan konfirmasi password tidak cocok!";
          alertDiv.classList.add("show");
          return;
        }

        if (password.length < 6) {
          alertDiv.textContent = "Password harus minimal 6 karakter!";
          alertDiv.classList.add("show");
          return;
        }

        // Check if email already exists
        if (UserDB.emailExists(email)) {
          alertDiv.textContent =
            "Email sudah terdaftar. Silakan gunakan email lain atau login.";
          alertDiv.classList.add("show");
          return;
        }

        // Register user
        try {
          const newUser = UserDB.addUser({
            name: name,
            email: email,
            phone: phone,
            password: password,
          });

          // Show success message
          successDiv.textContent =
            "Pendaftaran berhasil! Silakan login dengan akun Anda.";
          successDiv.classList.add("show");

          // Clear form
          event.target.reset();

          // Auto switch to login after 2 seconds
          setTimeout(() => {
            switchToLogin();
          }, 2000);
        } catch (error) {
          alertDiv.textContent = "Terjadi kesalahan. Silakan coba lagi.";
          alertDiv.classList.add("show");
        }
      }

      // ========================
      // UTILITY FUNCTIONS
      // ========================
      function scrollToFeatures() {
        document
          .getElementById("features")
          .scrollIntoView({ behavior: "smooth" });
      }

      // Console branding
      console.log(
        "%cüöÄ UMKM Lokal - Landing Page",
        "color: #1E40AF; font-size: 24px; font-weight: bold;"
      );
      console.log(
        "%c‚ú® Platform Terpadu untuk Layanan Publik & UMKM",
        "color: #14B8A6; font-size: 14px;"
      );
      console.log(
        "%cüîê Authentication System Active",
        "color: #059669; font-size: 12px;"
      );
    </script>
  </body>
</html>
